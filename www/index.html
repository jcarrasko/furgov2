<!--
/**
 * Club Camper Furgovw's Mobile App
 * Copyright (C) 2012, Club Camper Furgovw (furgovw.org)
 * Original by Javier Montes (@mooontes - http://mooontes.com)
 * Version 2 by José Carrasco (@jcarrasko )
 */
-->
<!DOCTYPE html>
<html manifest="CACHE-MANIFEST">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />


    <!-- <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1"> -->
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=no">

    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1, maximum-scale=2"> -->

    <style>
        /* following three (cascaded) are equivalent to above three meta viewport statements */
        /* see http://www.quirksmode.org/blog/archives/2014/05/html5_dev_conf.html */
        /* see http://dev.w3.org/csswg/css-device-adapt/ */
        
        @-ms-viewport {
            width: 100vw;
            min-zoom: 100%;
            zoom: 100%;
        }
        
        @viewport {
            width: 100vw;
            min-zoom: 100% zoom: 100%;
        }
        
        @-ms-viewport {
            user-zoom: fixed;
            min-zoom: 100%;
        }
        
        @viewport {
            user-zoom: fixed;
            min-zoom: 100%;
        }
        /* Prevent FOUC */
        
        body {
            opacity: 0;
        }
        
        #map_page {
            width: 100%;
            height: 100%
        }
        
        #map_content {
            padding: 0;
            width: 100%;
            height: 100%
        }
        /*@-ms-viewport { user-zoom: zoom ; min-zoom: 100% ; max-zoom: 200% ; }   @viewport { user-zoom: zoom ; min-zoom: 100% ; max-zoom: 200% ; }*/
    </style>




    <!--link rel="stylesheet" type="text/css" href="jqm/jquery.mobile-min.css" />
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="css/index_main.less.css" class="main-less"-->

    <!--restyling -->
    <link rel="stylesheet" href="css/font-awesome/font-awesome.min.css" />
    <link rel="stylesheet" href="css/jquerymobile/jquery.mobile.min.css" />
    <link rel="stylesheet" href="vendor/waves/waves.min.css">
    <link rel="stylesheet" href="css/nativedroid2/nativedroid2.css">
    <link rel="stylesheet" href="css/nativedroid2/material-design-iconic-font.min.css">

    <script src="vendor/jquerymobile/jquery.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script src="vendor/jquerymobile/jquery.mobile-1.4.5.min.js"></script>

    <script src="vendor/waves/waves.min.js"></script>
    <script src="vendor/wow/wow.min.js"></script>
    <script src="js/nativedroid2/nativedroid2.js"></script>
    <script src="js/nativedroid2/nd2settings.js"></script>

    <!-end restyling -->

    <style>
        /*body {
            overflow: hidden;
        }*/
        /* overwrite nd2 default cards */
        
        .nd2-card .card-title .card-subtitle {
            font-size: 14px;
            margin: 0px;
            color: #8e8e8e;
            font-weight: 400;
            line-height: 20px;
            max-width: 90%;
            overflow: inherit;
            white-space: normal;
            text-overflow: inherit;
        }
        
        .nd2-card .card-title .card-primary-title {
            margin: 0px;
            font-weight: 500;
            font-size: 16px;
            line-height: 26px;
            max-width: 90%;
            overflow: inherit;
            white-space: normal;
            text-overflow: inherit;
        }
        
        .search-header {
            background-color: transparent;
        }
    </style>

    <script type="text/javascript" src="cordova.js"></script>
    <!--script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
    
    <script type="text/javascript" src="jqm/jquery.mobile-min.js"></script-->
    <script type="text/javascript" src="js/jquery.jsonp.js"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>


    <script type="text/javascript" src="js/markerclusterer_compiled.js"></script>
    <script type="text/javascript" src="js/service/geoService.js"></script>
    <script type="text/javascript" src="js/service/spotService.js"></script>
    <script type="text/javascript" src="js/furgovw.js"></script>
    <script type="text/javascript" src="js/index.js"></script>


    <script type="text/javascript">
        app.initialize();
    </script>

    <script>
        $(function () {
            $("#menu_include").load("includes/menu.html");
        });




        // nd2Search
        (function ($) {
            $.nd2Search = function (options) {

                var _self = this;

                _self.defaults = {
                    placeholder: "Search",
                    source: [],
                    defaultIcon: 'star',
                    fn: function (r) {
                        console.log("No Callback function defined.");
                    }
                };

                _self.options = $.extend(_self.defaults, options);

                _self.applyWaves = function () {
                    if (typeof Waves !== "undefined") {
                        Waves.attach('.nd2-search-button, .nd2-search-back-button', ['waves-button']);
                        Waves.init();
                    }
                };

                _self.getSearchButton = function (offset) {

                    return "<a href='#' class='ui-btn ui-btn-right wow fadeIn nd2-search-button' style='margin-right: " + offset + "px;' data-wow-delay='1s'><i class='zmdi zmdi-search'></i></a>";
                };

                _self.getBackButton = function () {

                    return "<a href='#' class='ui-btn ui-btn-left wow fadeIn nd2-search-back-button' data-wow-delay='0.2s'><i class='zmdi zmdi-arrow-back'></i></a>";
                };

                _self.getSearchInput = function () {

                    return "<input id='list_filter' type='text' class='nd2-search-input' value='' placeholder='" + _self.options.placeholder + "' />";
                };

                _self.activateSearch = function () {
                    _self.getHeader().addClass("nd2-search-active");
                    _self.getSearchInputObj().val('').focus();
                };

                _self.hideSearch = function () {
                    _self.getHeader().removeClass("nd2-search-active");
                };

                _self.getHeader = function () {
                    return $("body").find(".ui-page-active div[data-role='header']").first();
                };

                _self.getSearchInputObj = function () {
                    return _self.getHeader().find('.nd2-search-input');
                };

                _self.bindEvents = function () {
                    _self.getHeader()
                        .on('click', '.nd2-search-button', function (e) {
                            e.preventDefault();
                            _self.activateSearch();
                        })
                        .on('click', '.nd2-search-back-button', function (e) {
                            e.preventDefault();
                            _self.hideSearch();
                        });

                    _self.bindAutocomplete();

                };

                _self.bindAutocomplete = function () {
                    return;
                    _self.getSearchInputObj().autocomplete({
                            delay: 500,
                            minLength: 1,
                            source: _self.options.source,
                            select: function (e, ui) {
                                if (typeof ui.item !== 'undefined' && typeof ui.item.value !== 'undefined') {
                                    if (typeof _self.options.fn === 'function') {
                                        _self.options.fn(ui.item.value);
                                        _self.hideSearch();
                                    }
                                }
                            }
                        })
                        .autocomplete('instance')._renderItem = function (ul, item) {
                            if (typeof item === 'string') {
                                item = {
                                    icon: _self.options.defaultIcon,
                                    value: item,
                                    label: item
                                };
                            }

                            var icon = (typeof item.icon !== 'undefined') ? "<i class='zmdi zmdi-" + item.icon + "'></i>" : "<i class='zmdi zmdi-" + _self.options.defaultIcon + "'></i>";
                            return $("<li class='nd2-search-result-item'>")
                                .attr("data-value", item.value)
                                .append("<span class='icon'>" + icon + "</span><span class='term'>" + item.label + "</span>")
                                .appendTo(ul);
                        };


                };

                _self.create = function () {

                    var header = _self.getHeader();
                    var content = null;
                    if (header.length > 0) {

                        var firstBtnRight = header.find(".ui-btn-right");

                        if (firstBtnRight.length > 0) {
                            firstBtnRight.first().before(_self.getSearchButton(firstBtnRight.length * (firstBtnRight.outerWidth())));
                        } else {
                            header.append(_self.getSearchButton(0));
                        }

                        header.css({
                            'minHeight': header.height() + 'px'
                        });

                        header.prepend(_self.getBackButton());
                        header.prepend(_self.getSearchInput());

                        _self.applyWaves();
                        _self.bindEvents();

                    }

                };

                window.setTimeout(function () {
                    _self.create();
                }, 500);
            };

        }($));





        new $.nd2Search({
            id: "list_filter",
            placeholder: "Buscar", // Placeholder in the search field
            defaultIcon: "globe-alt", // optional: icon | null
            source: [{
                label: 'Displayed Value',
                value: 'real-value',
                icon: 'custom-icon'
            }], // autocomplete : option-source
            fn: function (result) { // this function will be executed when a valid result item is selected
                console.log('--- Your custom handling ---');
                console.log('you picked: ');
                console.log(result);
            }
        });
        
        
        
        
        $("spots_list_list").filterable( "option", "input", "#list_filter" );

         
    </script>

    <title>Furgoperfectos Offline</title>


    <!-- IMPORTANT: Do not include a weinre script tag as part of your release builds! -->
    <!-- Place your remote debugging (weinre) script URL from the Test tab here, if it does not work below -->
    <!-- <script src="http://debug-software.intel.com/target/target-script-min.js#insertabiglongfunkynumberfromthexdkstesttab"></script> -->

    <!-- Recommended location for your JavaScript libraries -->
    <!-- These library references (below) are just examples to give you the general idea... -->
    <!-- <script src="lib/mc/hammer.js"></script> -->
    <!-- <script src="lib/ft/fastclick.js"></script> -->

    <!--
* cordova.js is a phantom lib for "Cordova HTML5 web app," it does nothing in a "Standard HTML5 web app"
* Seeing a "Failed to load resource: net::ERR_FILE_NOT_FOUND" message caused by this "cordova.js" script?
* The cordova.js script is required if you convert your "Standard HTML5" project into a "Cordova" project.
* You can safely ignore the error or comment out this line if you will not be developing a Cordova app.
-->

    <!--
    <script src="cordova.js" id="xdkJScordova_"></script>

   <!-- <script src="js/app.js"></script>-->
    <!-- for your event code, see README and file comments for details -->
    <!-- <script src="js/init-app.js"></script>-->
    <!-- for your init code, see README and file comments for details -->
    <!-- <script src="xdk/init-dev.js"></script> -->
    <!-- normalizes device and document ready events, see file for details -->
</head>

<body>

    <div data-role="page" id="home">

        <div data-role="panel" id="bottomsheetblock" class="ui-bottom-sheet ui-bottom-sheet-list" data-animate="false" data-position='bottom' data-display="overlay">
            <div id="menu_include" data-src="includes/menu.html"></div>

        </div>
        <!-- Header -->
        <div data-role="header" data-position="fixed" class="wow fadeIn ui-header ui-bar-inherit ui-header-fixed slidedown ui-header ui-header-fullscreen ui-bar-inherit ui-header-fixed slidedown" role="banner">


            <!--input id="list_filter" type="text" class="nd2-search-input" value="" placeholder="Buscar"/-->


            <a href="#bottomsheetblock" class="ui-btn ui-btn-right wow fadeIn" data-wow-delay='1.2s'><i class="zmdi zmdi-more-vert"></i></a>
            <a id="filter_button" href="#search-page" class="ui-btn ui-btn-left wow fadeIn" data-wow-delay='0.8s'><i class="zmdi zmdi-filter-list"></i></a>


            <h1 style="visibility: visible; animation-delay: 0.4s; animation-name: fadeIn;" aria-level="1" role="heading" class="wow fadeIn ui-title" data-wow-delay="0.4s">Buscar...</h1>

        </div>

        <!--content-->
        <div data-role="content">
            <div>
                <a href="#map_page" class="ui-btn ui-mini ui-btn-inline waves-effect waves-button waves-effect waves-button"><i class="zmdi zmdi-my-location" >&nbsp;</i><i   id="fvw_user_location_input"> Barcelona, Catalunya</i></a>

            </div>


            <ul id="spots_list_list" data-sort="true" data-role="listview" data-inset="true" data-filter="true" data-input="#list_filter" placeholder="Busca...">
            </ul>
        </div>
        <!-- footer -->
        <div data-role="footer" data-position="fixed">
            <div class="row center-xs">
                <div class="col-xs-4">
                    <div class="box">
                        <a id="fvw_all_spots_button" href="#search-page" class="ui-btn ui-mini nd2-btn-icon-block"><i class='zmdi zmdi-search'></i> Buscar</a>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="box">
                        <a href="#map_page" class="ui-btn ui-mini nd2-btn-icon-block"><i class='zmdi zmdi-navigation'></i> Mapa</a>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="box">
                        <a id="fvw_user_location_button" href="#" class="ui-btn ui-mini nd2-btn-icon-block"><i class='zmdi zmdi-favorite'></i> Favoritos</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Map Page -->
    <div id="map_page" data-role="page">
        <div data-role="header" data-position="fixed">
            <a href="#bottomsheetblock" class="ui-btn ui-btn-right wow fadeIn" data-wow-delay='1.2s'><i class="zmdi zmdi-more-vert"></i></a>
            <a data-role="button" role="button" data-rel="back" class="ui-btn ui-btn-left wow fadeIn" data-wow-delay='0.8s'><i class="zmdi zmdi-arrow-back"></i></a>

            <h1>Mapa</h1>
        </div>

        <div id="map_content" data-role="content">
            <div id="map">Buscando ubicación..</div>
        </div>
    </div>


    <!-- Spots List Page !not needed 
<div id="spots-list" data-role="page">
    <div data-role="header" data-position="fixed" data-add-back-btn="false">
        <h1 id="fvw_location_name">furgovw.org</h1>
    </div>

    <div data-role="content">
        <ul id="spots_list_list" data-role="listview"  data-inset="true" data-filter="true">
        </ul>
    </div>
</div> -->



    <!--- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Se usa ? -->
    <div id="spot-detail" data-id="" data-role="page">

        <div data-role="header" data-position="fixed">
            <a href="../toolbar/" data-rel="back" class="ui-btn-left ui-chevron-left   ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all ui-btn-active" data-role="button" role="button"></a>
            <h1>furgovw.org</h1>
        </div>

        <div data-role="content">
            <h1 id="fvw_spot_name"></h1>
            <h3 id="fvw_spot_distance"></h3>
            <img id="fvw_spot_picture">

            <p id="fvw_spot_author"></p>
            <p id="fvw_spot_msg_body"></p>

        </div>

        <div data-role="footer" data-position="fixed" class="container-group inner-element uib_w_11" data-uib="jquery_mobile/footer" data-ver="0">
            <h1></h1>
            <div class="widget-container wrapping-col single-centered">
                <div data-role="controlgroup" class="uib-jqm-flex widget uib_w_12 d-margins" data-uib="jquery_mobile/button_group" data-ver="0" data-type="horizontal">
                    <a class="widget uib_w_13" id="fvw_navigator_forum_link" data-uib="jquery_mobile/button" data-ver="0" data-role="button" data-icon="navigation" data-iconpos="top">Navegar</a>
                    <a class="widget uib_w_14" id="fvw_spot_forum_link" data-uib="jquery_mobile/button" data-ver="0" data-role="button" data-icon="action" data-iconpos="top">FurgoVW</a>
                    <a class="widget uib_w_15" data-uib="jquery_mobile/button" data-ver="0" data-role="button" data-icon="heart" data-iconpos="top">Favoritos</a>
                </div>
            </div>
            <div class="widget-container content-area horiz-area wrapping-col left"></div>
            <div class="widget-container content-area horiz-area wrapping-col right"></div>
        </div>
    </div>

    <div id="location-detail" data-id="" data-role="page">
        <div data-role="header" data-position="fixed" data-back-btn-text="">
            <a href="../toolbar/" data-rel="back" class="ui-btn-left ui-chevron-left   ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all ui-btn-active" data-role="button" role="button"></a>
            <h1 id="fvw_location_name">furgovw.org</h1>
        </div>

        <div data-role="content">
            <h1 id="fvw_location_name2"></h1>

            <h3 id="fvw_spot_distance2"></h3>
            <a id="fvw_spot_forum_lin2k" data-role="button" target="_blank"></a>

        </div>


    </div>

    <!-- search page -->
    <div data-role="page" id="search-page">
        <div data-role="header" data-position="fixed">

            <a href="#" class="ui-btn ui-btn-right wow fadeIn" data-wow-delay='1.2s'><i class="zmdi zmdi-check"></i></a>
            <a data-role="button" role="button" data-rel="back" class="ui-btn ui-btn-left wow fadeIn" data-wow-delay='0.8s'><i class="zmdi zmdi-arrow-back"></i></a>

            <h1>Filtrar...</h1>
        </div>

        <div data-role="content">
            <form id="search_form" action="#home">
                <label for="search_typeb" class="select">Tipo:</label>
                <select tabindex="-1" name="search_type" id="search_typeb" data-native-menu="false">
                    <option value="100">Todos</option>
                    <option value="0">Furgoperfecto</option>
                    <option value="1">Area AC</option>
                    <option value="2">Via Verde</option>
                    <option value="4">Camping</option>
                    <option value="5">Centro Comercial</option>
                    <option value="3">Otros 3</option>
                    <option value="6">Otros 6</option>
                </select>
                <label for="search_stateb" class="select">Estado:</label>
                <select tabindex="-1" name="search_state" id="search_stateb" data-native-menu="false">
                    <option value="100">Todos</option>
                    <option value="100">Catalunya</option>
                    <option value="100">Pais Vasco</option>
                    <option value="100">Galicia</option>
                    <option value="100">España</option>
                    <option value="100">Francia</option>
                </select>
                <label for="search_areab" class="select">Area</label>
                <select tabindex="-1" name="search_area" id="search_areab" data-native-menu="false">
                    <option value="100">Todas</option>
                    <option value="100">Aragon</option>
                    <option value="100">Andalucia</option>
                    <option value="100">Valencia</option>
                </select>
                <!--br/>
                <br/>
                <button class="ui-btn waves-effect waves-button waves-effect waves-button"><i class="zmdi zmdi-check"></i> Buscamelo</button-->
            </form>
        </div>

    </div>
</body>

</html>